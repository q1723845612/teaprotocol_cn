# 什么是贡献证明（技术性）

Proof of Contribution通过将开源软件包、它们的版本和它们的依赖关系建模为图中的节点和边来衡量项目的影响。该算法基于Google的PageRank构建，使用概率分布为节点分配得分（teaRank得分），这些得分表示随机导航到特定节点的可能性。 Proof of Contribution使用各种输入和反垃圾机制来准确衡量软件项目的影响。为了输出一个teaRank分数，该算法可能考虑软件项目的以下方面：

1. 项目影响，使用项目的依赖数量作为代理
2. 项目随时间的影响，使用项目的年龄作为代理

## _衡量累积影响_&#x20;

Proof of Contribution评估OSS生态系统中每个项目的影响如何随时间变化，并提供一个分析，展示哪些OSS项目持续提供实质性价值。为了衡量这一点，它将开源图拆分为不同的时间段或Δ（delta）。&#x20;

对于每个时间段，该算法使用以前时间段的信息计算每个项目的teaRank，以指导当前时间段的teaRank计算。这提供了项目重要性的细致和长期历史，同时在确定其影响时考虑了软件项目的所有版本。&#x20;

Proof of Contribution用于分析的δ时间段数是一个重要的设计选择。使用太少的δ间隔可能无法量化OSS项目的全部影响，而使用太多的间隔可能会显著减少对新建立项目的激励。使用过多的δ间隔还会在要求tea Protocol重构整个开源图δ次以生成teaRank时创建计算负担。&#x20;

## _垃圾邮件抵抗_

Proof of Contribution的设计旨在抵御基于两个主要框架——树攻击和宽攻击的垃圾邮件。采取这种方法来对抗垃圾邮件是有效的，因为开源软件的垃圾邮件技术通常涉及劫持现有软件项目或创建包含恶意代码的复杂依赖网络。&#x20;

### 树攻击&#x20;

想象一下一个软件依赖的金字塔。一个恶意行为者创建一个长链的依赖项目，人为地膨胀了链中每个项目的重要性，旨在为每个软件依赖生成不公平的奖励。&#x20;

### 宽攻击&#x20;

想象一个被许多依赖项目包围的单个软件项目。一个恶意行为者创建大量虚假的依赖项目，人为地膨胀了中心项目的影响。&#x20;

### 对抗树攻击和宽攻击&#x20;

Proof of Contribution在一定程度上通过量化软件项目到不依赖于任何其他项目的项目的最长依赖路径——称为其树限制来对抗树攻击。该算法通过计算软件项目的宽限制或其总软件依赖数量来部分地抵御宽攻击。 Proof of Contribution在δ时间间隔内始终监视树和宽限制，以识别并可能标记为垃圾邮件的任何软件项目在OSS生态系统中的位置发生突然变化。 Proof of Contribution还通过使用高级符号Kappa或κ来抵御树攻击。κ是自我影响的度量，它源自Proof of Contribution使用自边——从节点（OSS项目）到自身的边。Kappa的值范围从0到1。

### κ（Kappa）

&#x20;我们根据自我影响调节的概念设计了κ，以便垃圾邮件者在通过现有或新项目控制网络的大部分项目时难以利用排名系统。 该方法涉及在图中的每个项目上引入自边，并分配一个介于0和1之间的边权重，我们表示为κ。每个项目的所有其余边都被重新索引，使其边权的总和为1 - κ。我们有效地限制了从一个项目到另一个项目的排名流动。这种机制有两个效果：

1. 通过将依赖关系插入依赖图中深处的项目，减少了垃圾邮件网络滥用网络的潜力。
2. 简化了问题，以允许对基础项目（即位于依赖栈底部的项目）进行公平的teaRank评分 在设计κ的值时，我们考虑了树状垃圾邮件网络的影响以及建立对垃圾邮件网络能够获得不当影响的限制的需要。κ充当一个可调节的工具，用于微调软件包对自身影响的程度，平衡防范垃圾邮件和准确衡量开源软件包影响之间的关系。&#x20;

### δ（Delta）&#x20;

虽然κ解决了项目在直接邻域中的影响，但δ关注的是随时间的影响。它允许teaRank捕捉项目随着开源生态系统的增长而不断变化的影响。 我们将δ定义为我们将迭代构建开源图的一个周期。在每个周期，我们将使用以前周期的得分作为当前周期的边权重来计算teaRank分数。基本上，我们捕捉了项目随时间的累积价值和影响，提供了对其重要性的全面视图。

## _平衡 κ 和 δ_&#x20;

过分依赖 κ 可能会严重偏向已建立的开源软件项目，使奖励分配失衡，而过分依赖 δ 则可能抑制刚刚出现的 OSS 项目，从而扼杀创新。Proof of Contribution 算法经过校准，以避免这些问题，同时在资源高效的方式下运行。

δ 和 κ 的初始值经过广泛的数据分析定义，但可以进行调整。在 tea 的激励测试网阶段开始，tea 的开发人员将密切监视 teaRank 的性能，并可能向 teaDAO 推荐对 δ 或 κ 进行调整。

虽然 teaRank 参数是必要的，但仅仅依赖它们可能是不够的。过度调整算法以对抗垃圾邮件攻击可能会扭曲每个项目的真实影响。为了达到合适的平衡，我们开发了两种策略——限制和奖励阈值——这不仅有助于检测垃圾邮件，还会对操纵系统获取不当奖励的恶意行为者引入成本。

## _压缩_&#x20;

为了减少对最依赖和最不依赖的项目之间的差异，tea 协议通过执行一些操作来压缩原始的 teaRank 分数。这些操作包括将原始的 teaRank 分数转换为它们的对数等价物，这显著减少了差异，同时保持了该分数的相对大小。通过这种压缩，两个项目之间的差异从 2,500,000 倍减少到 100,000 倍。

通过这种压缩算法，tea 协议可以区分贡献和依赖较低的小众项目，以及具有大量依赖和贡献者的广泛使用的项目。通过这种区分，tea 协议将 teaRank 奖励阈值分配为高于小众项目的值，并最小化垃圾邮件奖励。理想的阈值消除了分发给恶意行为者的任何代币奖励，同时最小化了合法有影响的包的奖励损失。

## _奖励阈值和限制_&#x20;

Proof of Contribution 使用阈值和限制的组合来进一步增强其抵御垃圾邮件的能力。该算法的阈值和限制机制集中在项目的 teaRank 分数周围。

* teaRank 分数阈值 - tea 协议使用 Proof of Contribution 来计算和分发 teaRank 奖励，仅分配给在协议注册的 OSS 项目，其 teaRank 分数高于由治理定义的阈值。
* teaRank 分数限制 - Proof of Contribution 应用边权重并使用自边来建立软件项目可以获得的 teaRank 分数的上限。

注册到 tea 协议的软件项目受益于 Proof of Contribution 使用阈值和限制的好处，这使得 TEA 代币能够在只有对 OSS 项目产生实质影响的情况下进行公平分配。teaRank 分数阈值阻止垃圾邮件者，而 teaRank 分数限制限制了垃圾邮件项目获得不当奖励的能力。使用阈值和限制还有助于垃圾邮件检测。

Proof of Contribution 的目标是将 teaRank 分数阈值设置为精确的水平，以消除对恶意行为者的代币奖励分发，同时最小化 teaRank 分数低于该阈值的合法、有影响的包的情况。该算法的目标是将 teaRank 分数限制设置为一定水平，以同时奖励历史悠久、有影响力的 OSS 项目，并欢迎重要的新项目加入 OSS 生态系统。
